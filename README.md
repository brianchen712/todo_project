# ğŸ“‹ è‡ªå‹•åŒ–æ¸¬è©¦å°ˆæ¡ˆ - æé†’äº‹é …ç³»çµ±

æœ¬å°ˆæ¡ˆæ˜¯ä¸€å€‹ä½¿ç”¨ Flask + MSSQL å¯¦ä½œçš„æé†’äº‹é …ç³»çµ±ï¼Œæ”¯æ´æœƒå“¡è¨»å†Š/ç™»å…¥ã€æé†’äº‹é … CRUDã€é™„ä»¶ä¸Šå‚³èˆ‡ç‹€æ…‹åˆ‡æ›ã€‚
æ­é… Selenium èˆ‡ requests å¯¦ä½œ UI åŠ API å±¤ç´šçš„è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œä¸¦æ•´åˆ GitHub Actions åŸ·è¡Œ CIã€è‡ªå‹•ç”¢å‡º HTML èˆ‡ Allure æ¸¬è©¦å ±å‘Šã€‚

å·²å®Œæˆ[æ¸¬è©¦è¨ˆç•«æ›¸.docx](https://github.com/user-attachments/files/20788802/default.docx)åŠ[æ¸¬è©¦æ¡ˆä¾‹ç¸½è¡¨.xlsx](https://github.com/user-attachments/files/20788815/default.xlsx)æ’°å¯«ï¼Œä¸¦éµç…§ç¸½è¡¨å…§å®¹è½‰åŒ–æˆç¨‹å¼

---

## ğŸš€ åŠŸèƒ½æ¦‚è¿°

- âœ… **æœƒå“¡åŠŸèƒ½ï¼šæ”¯æ´è¨»å†Šã€ç™»å…¥èˆ‡ç™»å‡ºï¼Œæ•´åˆ JWT é©—è­‰æ©Ÿåˆ¶ä»¥ä¿è­·ä½¿ç”¨è€…è³‡æ–™**
- âœ… **æé†’äº‹é …ç®¡ç†ï¼šæä¾›æ–°å¢ã€ç·¨è¼¯ã€åˆªé™¤ã€æŸ¥çœ‹ç­‰å®Œæ•´ CRUD æ“ä½œ**
- âœ… **ç‹€æ…‹åˆ‡æ›åŠŸèƒ½ï¼šå¯æ–¼æ¸…å–®é å³æ™‚åˆ‡æ›æé†’äº‹é …å®Œæˆç‹€æ…‹ï¼ˆæœªå®Œæˆ â†” å·²å®Œæˆï¼‰**
- âœ… **æª”æ¡ˆé™„ä»¶åŠŸèƒ½ï¼šæ¯ç­†æé†’äº‹é …å¯ä¸Šå‚³é™„ä»¶ä¸¦æ–¼é é¢é¡¯ç¤ºé€£çµ**
- âœ… **æ“ä½œç´€éŒ„è¿½è¹¤ï¼šè‡ªå‹•è¨˜éŒ„ç™»å…¥èˆ‡è¨»å†Šè¡Œç‚º logï¼Œå¼·åŒ–å®‰å…¨æ€§èˆ‡å¯è¿½æº¯æ€§**
- âœ… **API è‡ªå‹•åŒ–æ¸¬è©¦ï¼šä½¿ç”¨ requests + pytest é©—è­‰ API æˆåŠŸèˆ‡éŒ¯èª¤è™•ç†é‚è¼¯**
- âœ… **GitHub Actions è‡ªå‹•æ¸¬è©¦ + å ±å‘Šä¸Šå‚³**

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
â”œâ”€â”€ app.py                # ä¸»æ‡‰ç”¨ç¨‹å¼
â”œâ”€â”€ config.py             # DB èˆ‡ä¸Šå‚³è¨­å®š
â”œâ”€â”€ init_database.py      # å»ºç«‹ TEST è³‡æ–™åº«ï¼ˆMSSQLï¼‰
â”œâ”€â”€ init_data.py          # å»ºç«‹ TEST è³‡æ–™åº«è³‡æ–™è¡¨èˆ‡é è¨­æ¸¬è©¦å¸³è™Ÿ
â”œâ”€â”€ models.py             # User / Todo / Log è³‡æ–™è¡¨å®šç¾©
â”œâ”€â”€ utils.py              # JWTã€æ¬„ä½é©—è­‰ã€log ç´€éŒ„ã€ä¸Šå‚³å·¥å…·
â”œâ”€â”€ requirements.txt      # æ‰€éœ€å¥—ä»¶
â”œâ”€â”€ pytest.ini            # æ¸¬è©¦æ¨™ç±¤èˆ‡å ±å‘Šè¨­å®š

â”œâ”€â”€ templates/            # HTML æ¨£æ¿ï¼ˆç™»å…¥ã€è¨»å†Šã€è¡¨å–®ã€æ¸…å–®ï¼‰
â”œâ”€â”€ static/               # CSSã€åœ–æª”ã€é™„ä»¶ä¸Šå‚³
â”œâ”€â”€ data/                 # æ¸¬è©¦è³‡æ–™ï¼ˆYAMLï¼‰
â”œâ”€â”€ pages/                # Selenium Page Object æ¨¡çµ„
â”œâ”€â”€ tests/                # æ¸¬è©¦è…³æœ¬ï¼ˆUI + APIï¼‰
â”‚   â””â”€â”€ files/            # é™„ä»¶æ¸¬è©¦ç”¨æª”æ¡ˆ
â”œâ”€â”€ screenshots/          # æ¸¬è©¦å¤±æ•—æˆªåœ–æˆ–ç‰¹å®šæ¡ˆä¾‹æˆªåœ–
â”œâ”€â”€ allure-results/       # å­˜æ”¾Allure å ±å‘ŠåŸå§‹è³‡æ–™

â””â”€â”€ .github/workflows/    # GitHub Actions CI è¨­å®šæª”
```

---

## âš™ï¸ å®‰è£æ–¹å¼ï¼ˆæœ¬æ©Ÿï¼‰

```bash
# å®‰è£å¥—ä»¶
pip install -r requirements.txt

# åˆå§‹åŒ–è³‡æ–™åº«ï¼ˆéœ€å…ˆå•Ÿå‹• MSSQLï¼Œå¸³å¯†èˆ‡ port è«‹ç¢ºèª config.py è¨­å®šï¼‰
python init_database.py

# å»ºç«‹è³‡æ–™è¡¨èˆ‡é è¨­æ¸¬è©¦å¸³è™Ÿ
python init_data.py

# å•Ÿå‹• Flask æ‡‰ç”¨
python app.py
```

å•Ÿå‹•å¾Œå¯é€éç€è¦½å™¨é–‹å•Ÿï¼š`http://127.0.0.1:5000`

---

## ğŸ§ª æ¸¬è©¦åŸ·è¡Œæ–¹å¼(æœ¬æ©Ÿ)

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦ä¸¦ç”¢å‡º HTML + Allure å ±å‘Š
pytest --html=report.html --self-contained-html --alluredir=allure-results

# åŸ·è¡Œç‰¹å®šæ¨™ç±¤æ¸¬è©¦
pytest -m login
pytest -m register
pytest -m todo
pytest -m api
```

- `report.html`ï¼šHTML æ¸¬è©¦å ±å‘Šï¼Œå¯ç›´æ¥ç”¨ç€è¦½å™¨æ‰“é–‹
- `allure-results/`ï¼šAllure å ±å‘ŠåŸå§‹è³‡æ–™ï¼Œå¯ä½¿ç”¨ `allure serve` è§€çœ‹

---

## ğŸ¤– GitHub Actions è‡ªå‹•åŒ–æµç¨‹

CIé€é .github/workflows/test.yml è‡ªå‹•åŸ·è¡Œä»¥ä¸‹å®Œæ•´æµç¨‹ï¼š

1. **å•Ÿå‹• MSSQL æœå‹™ï¼ˆDockerï¼‰**  
   - ä½¿ç”¨å®˜æ–¹ MSSQL å®¹å™¨ï¼Œè¨­ç½®å°ç£åœ°å€å­—å…ƒæ’åºèˆ‡é€£æ¥å¸³å¯†  
   - ç›£æ§æœå‹™å•Ÿå‹•ç‹€æ…‹ï¼Œç¢ºä¿è³‡æ–™åº«æº–å‚™å°±ç·’å¾Œå†ç¹¼çºŒåŸ·è¡Œå¾ŒçºŒæ­¥é©Ÿ

2. **å®‰è£ Python ç’°å¢ƒèˆ‡å°ˆæ¡ˆä¾è³´å¥—ä»¶**  
   - å®‰è£ Python 3.11 èˆ‡ `requirements.txt` ä¸­æ‰€åˆ—å¥—ä»¶  
   - é¡å¤–å®‰è£ ODBC é©…å‹•èˆ‡ `sqlcmd` å·¥å…·ï¼Œä»¥æ”¯æ´ MSSQL æ“ä½œ

3. **å•Ÿå‹• Flask æ‡‰ç”¨ï¼ˆèƒŒæ™¯åŸ·è¡Œï¼‰**  
   - ä½¿ç”¨ `nohup` å•Ÿå‹• Flask æ‡‰ç”¨ï¼Œä¸¦å°‡ log å„²å­˜æ–¼ `flask.log`  
   - ç¢ºä¿æ‡‰ç”¨å¯æä¾› UI æ¸¬è©¦å­˜å–

4. **åˆå§‹åŒ–è³‡æ–™åº«èˆ‡é è¨­æ¸¬è©¦è³‡æ–™**  
   - åŸ·è¡Œ `init_database.py` å»ºç«‹è³‡æ–™è¡¨  
   - åŸ·è¡Œ `init_data.py` æ–°å¢é è¨­æ¸¬è©¦å¸³è™Ÿç­‰åˆå§‹è³‡æ–™

5. **å»ºç«‹å­˜æ”¾æ¸¬è©¦æ¡ˆä¾‹æˆªåœ–è³‡æ–™å¤¾**  
   - å»ºç«‹è³‡æ–™å¤¾å­˜æ”¾æ¸¬è©¦æ¡ˆä¾‹çš„æˆªåœ–

6. **åŸ·è¡Œæ¸¬è©¦ä¸¦ç”¢å‡ºå ±å‘Š**  
   - ä½¿ç”¨ `pytest` åŸ·è¡Œ Selenium + requests çš„è‡ªå‹•åŒ–æ¸¬è©¦  
   - åŒæ™‚ç”¢å‡ºï¼š
     - `report.html`ï¼ˆHTML æ¸¬è©¦å ±å‘Šï¼‰
     - `allure-results/`ï¼ˆAllure æ¸¬è©¦è³‡æ–™ï¼‰

7. **Allure HTML ç”¢ç”Ÿèˆ‡éƒ¨ç½² Pages**
   - ä¸‹è¼‰ CLI â†’ è½‰æ› â†’ ä½¿ç”¨ peaceiris/actions-gh-pages ç™¼å¸ƒ
   - [ğŸ“Š æŸ¥çœ‹ Allure æ¸¬è©¦å ±å‘Šï¼ˆGitHub Pagesï¼‰](https://brianchen712.github.io/todo_project/)

8. **ä¸Šå‚³æ¸¬è©¦æˆæœèˆ‡è³‡æºï¼ˆArtifactsï¼‰**  
   - ä¸Šå‚³æ¸¬è©¦å ±å‘Šèˆ‡æ¸¬è©¦æˆªåœ–ï¼ˆå¦‚æœ‰ï¼‰è‡³ GitHub Actions  
   - æ‰€æœ‰æ¸¬è©¦çµæœå¯ä¾›ä¸‹è¼‰èˆ‡å¾ŒçºŒåˆ†æ

9. **å¤±æ•—æ™‚è¼¸å‡º Flask æ‡‰ç”¨ logï¼ˆè¼”åŠ©é™¤éŒ¯ï¼‰**  
   - è‹¥æ¸¬è©¦å¤±æ•—ï¼Œè‡ªå‹•é¡¯ç¤º `flask.log` æœ€å¾Œå…§å®¹ä»¥ä¾›åˆ†æ 

---

## ğŸ§¾ é è¨­æ¸¬è©¦å¸³è™Ÿ

| å¸³è™Ÿ   | å¯†ç¢¼             | å‚™è¨»       |
|--------|----------------|------------|
| test   | P@ssw0rd_X9g2# | ç³»çµ±å…§å»ºæ¸¬è©¦å¸³è™Ÿ |

--- 


## ğŸ§ª æ¸¬è©¦æˆªåœ–
Step1ï¼šæˆåŠŸç™»å…¥å¾Œçš„æé†’æ¸…å–®é ï¼šé©—è­‰ç™»å…¥æˆåŠŸæœƒè‡ªå‹•å°å‘ /todo/listï¼Œä¸¦é¡¯ç¤ºå€‹äººæé†’æ¸…å–®ã€‚
![step1_login_success](https://github.com/user-attachments/assets/7579402c-13e5-4fa9-a0d3-cc99b3b68457)

Step2ï¼šç™»å…¥å¤±æ•—æ™‚é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ï¼šè¼¸å…¥éŒ¯èª¤å¸³è™Ÿå¯†ç¢¼ï¼Œç•«é¢é¡¯ç¤ºã€Œå¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ã€æç¤ºè¨Šæ¯ã€‚
![step2_login_fail](https://github.com/user-attachments/assets/bfab57ed-6a4a-4b16-93a9-8f7861927d87)

Step3ï¼šè¨»å†ŠæˆåŠŸå¾Œè·³è½‰ç™»å…¥é ï¼šä½¿ç”¨æ–°å¸³è™Ÿè¨»å†Šå¾Œï¼Œè‡ªå‹•è·³è½‰ç™»å…¥é é¢ï¼Œé©—è­‰æµç¨‹æ­£å¸¸ã€‚
![step3_register_success](https://github.com/user-attachments/assets/3e590f89-aa12-482e-ad95-31ceeeb9463f)

Step4ï¼šé‡è¤‡å¸³è™Ÿé¡¯ç¤ºéŒ¯èª¤ï¼šç•¶è¼¸å…¥å·²å­˜åœ¨çš„å¸³è™Ÿæ™‚ï¼Œæç¤ºã€Œå¸³è™Ÿå·²å­˜åœ¨ã€éŒ¯èª¤è¨Šæ¯ã€‚
![step4_register_duplicate](https://github.com/user-attachments/assets/049ad74e-597c-4d38-9016-6773caafbad8)

Step5ï¼šå¡«å¯«æ–°å¢ä»»å‹™è¡¨å–®ï¼šé»é¸æ¸…å–®ç•«é¢çš„ã€Œ+æ–°å¢ã€å¾Œï¼Œå¡«å¯«æé†’äº‹é …è¡¨å–®ç•«é¢ã€‚
![step5_create_form](https://github.com/user-attachments/assets/983d905c-635e-4e78-a1d2-b69ab57afadc)

Step6ï¼šæ–°å¢å¾Œå›åˆ°æ¸…å–®ç•«é¢ï¼šæ–°å¢å®Œæˆå¾Œè·³è½‰æ¸…å–®ï¼Œé©—è­‰ä»»å‹™æ­£ç¢ºæ–°å¢ä¸¦é¡¯ç¤ºåœ¨åˆ—è¡¨ã€‚
![step6_todo_list_after_create](https://github.com/user-attachments/assets/1419e98f-e356-47f1-ad9f-f497768965e1)

Step6ï¼šä»»å‹™ç·¨è¼¯å®Œæˆè¨Šæ¯ï¼šç·¨è¼¯ä»»å‹™å…§å®¹å¾Œé€å‡ºï¼Œé¡¯ç¤ºæˆåŠŸè¨Šæ¯æç¤ºå·²æ›´æ–°ã€‚
![step6_edit_done](https://github.com/user-attachments/assets/6a2c4b35-4370-4bb5-a64a-e1f258181d5b)

Step6ï¼šä»»å‹™åˆªé™¤å¾Œçš„ç•«é¢ï¼šé»é¸åˆªé™¤å¾Œæ¸…å–®è‡ªå‹•æ›´æ–°ï¼Œé©—è­‰ä»»å‹™æˆåŠŸç§»é™¤ã€‚
![step6_after_delete](https://github.com/user-attachments/assets/4afac2eb-8aae-46f4-86ce-1d3943ae9675)

Step7ï¼šé»æ“Šæ–°å¢ä¸¦é¸æ“‡æª”æ¡ˆï¼šé¡¯ç¤ºé»é¸ã€Œ+æ–°å¢ã€ä¸¦ä¸Šå‚³æª”æ¡ˆé™„ä»¶çš„ç•«é¢ã€‚
![step7_upload_file](https://github.com/user-attachments/assets/ea5f5754-5770-46f1-85b9-680220a9f752)

Step7ï¼šè¡¨å–®é€å‡ºæˆåŠŸç•«é¢ï¼šé™„ä»¶ä¸Šå‚³å¾ŒæˆåŠŸå»ºç«‹ä»»å‹™ï¼Œè·³è½‰å›æ¸…å–®ç•«é¢ã€‚
![step7_uploaded_done](https://github.com/user-attachments/assets/a434771b-c936-4818-8f54-3225c5db5e12)

Step7ï¼šé¡¯ç¤ºé™„ä»¶æª”æ¡ˆåç¨±ï¼šé»é¸æŸ¥çœ‹ä»»å‹™å…§å®¹ï¼Œé é¢æˆåŠŸé¡¯ç¤ºå·²ä¸Šå‚³çš„æª”æ¡ˆåç¨±é€£çµã€‚
![step7_verify_attachment_name](https://github.com/user-attachments/assets/64646b78-40f6-4770-94df-639acc5d3a98)

Step8ï¼šç‹€æ…‹åˆ‡æ›å‰ç‚ºã€Œæœªå®Œæˆã€ï¼šä»»å‹™å»ºç«‹å¾Œé è¨­ç‚ºæœªå®Œæˆç‹€æ…‹ï¼Œé¡¯ç¤ºå°æ‡‰æ¨™ç±¤ã€‚
![step8_status_before](https://github.com/user-attachments/assets/f58500ea-da5c-403f-9caa-5ccdc0a6db1d)

Step8ï¼šç‹€æ…‹åˆ‡æ›ç‚ºã€Œå·²å®Œæˆã€ï¼šé»æ“Šåˆ‡æ›æŒ‰éˆ•å¾Œï¼Œä»»å‹™ç‹€æ…‹å³æ™‚è®Šç‚ºå·²å®Œæˆã€‚
![step8_toggle_done](https://github.com/user-attachments/assets/9ac6ab15-a35c-48e7-be40-c5bc61608fbe)

Step8ï¼šå†æ¬¡åˆ‡æ›ç‚ºã€Œæœªå®Œæˆã€ï¼šå†æ¬¡é»æ“Šåˆ‡æ›æŒ‰éˆ•ï¼Œç‹€æ…‹æ¢å¾©ç‚ºæœªå®Œæˆã€‚
![step8_toggle_undo](https://github.com/user-attachments/assets/69e0fae6-b777-4653-89ff-1b8c0d433c17)

Step9ï¼šæ‰¹æ¬¡åˆªé™¤å‰çš„æ¸…å–®ï¼šé¡¯ç¤ºå·²å‹¾é¸å¤šç­†ä»»å‹™ï¼Œæº–å‚™åŸ·è¡Œæ‰¹æ¬¡åˆªé™¤çš„ç•«é¢ã€‚
![step9_batch_delete_before](https://github.com/user-attachments/assets/04295bba-5dfc-408f-b9ac-289f2db5b7f6)

Step9ï¼šæ‰¹æ¬¡åˆªé™¤å¾Œçš„æ¸…å–®ï¼šåˆªé™¤æˆåŠŸå¾Œåƒ…å‰©æœªå‹¾é¸çš„ä»»å‹™ï¼Œæ¸…å–®åŒæ­¥æ›´æ–°ã€‚
![step9_batch_delete_after](https://github.com/user-attachments/assets/e5544751-0c5e-4c0f-a003-d765dcfa355f)

Step10ï¼šAPI å»ºç«‹ä»»å‹™æˆåŠŸçš„ JSON å›æ‡‰ï¼šé€é requests.post ç™¼é€ APIï¼ŒæˆåŠŸå›å‚³ status=201 èˆ‡ {"message": "æˆåŠŸæ–°å¢å¾…è¾¦", "id": 78}ã€‚
```
{
  "id": 78,
  "message": "æˆåŠŸæ–°å¢å¾…è¾¦"
}
```
---

## ğŸ å¾ŒçºŒå¯æ“´å……é …ç›®

- [ ] Playwright æ”¹å¯« Selenium æ¸¬è©¦

---

## ğŸ™‹â€â™‚ï¸ è¯çµ¡èˆ‡å±¥æ­·

è‹¥å°æœ¬å°ˆæ¡ˆæ¶æ§‹æˆ–è‡ªå‹•åŒ–æ¸¬è©¦æµç¨‹æœ‰èˆˆè¶£ï¼Œæ­¡è¿æŠ€è¡“äº¤æµæˆ–å±¥æ­·è©¢å•ã€‚

---

## ğŸ“  å…¶é¤˜é™„ä»¶
[å®Œæ•´æ¸¬è©¦ä½œå“é›†èªªæ˜ï¼ˆWord ç‰ˆï¼‰ä¸‹è¼‰] [todo_test_portfolio.docx](https://github.com/user-attachments/files/20654628/todo_test_portfolio.docx)







